<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.f.dao.ext.users.UsersMapperExt" >

	<select id="isExistMobile" parameterType="string" resultType="boolean">
		select count(1) from users where mobile = #{value,jdbcType=VARCHAR}
	</select>  
	
	<select id="isExistUsername" parameterType="string" resultType="boolean">
		select count(1) from users where username = #{value,jdbcType=VARCHAR}
	</select>
	
	<insert id="insertUsers" parameterType="com.f.dto.users.Users" useGeneratedKeys="true" keyColumn="id" keyProperty="id">
		insert into users (username, password, mobile, createtime)
	    values 
	    (#{username,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, #{mobile,jdbcType=VARCHAR},#{createtime,jdbcType=TIMESTAMP})
	</insert>
	
	<select id="selectMUsers" parameterType="map" resultType="com.f.dto.users.Users">
		select id, username, password, mobile, balance, grade, createtime
		from users
		where password = #{password,jdbcType=VARCHAR}
		<if test="username != null">
			and username = #{username,jdbcType=VARCHAR}
		</if>
		<if test="mobile != null">
			and mobile = #{mobile,jdbcType=VARCHAR}
		</if>
	</select>
</mapper>